
{
  "entities": {
    "UserProfile": {
      "title": "User Profile",
      "description": "Represents a user's profile information.",
      "type": "object",
      "properties": {
        "displayName": {
          "type": "string",
          "description": "The user's display name."
        },
        "bikeDetails": {
          "$ref": "#/backend/entities/BikeDetails"
        }
      },
      "required": ["displayName"]
    },
    "BikeDetails": {
      "title": "Bike Details",
      "description": "Details about the user's vehicle.",
      "type": "object",
      "properties": {
        "name": { "type": "string" },
        "number": { "type": "string" },
        "make": { "type": "string" },
        "model": { "type": "string" },
        "year": { "type": "string" },
        "engineCc": { "type": "string" }
      },
      "required": ["name", "number", "engineCc"]
    },
    "FuelLog": {
      "title": "Fuel Log",
      "description": "A log of a fuel refill.",
      "type": "object",
      "properties": {
        "date": { "type": "string", "format": "date-time" },
        "odo": { "type": "number" },
        "liters": { "type": "number" },
        "amount": { "type": "number" },
        "price": { "type": "number" }
      },
      "required": ["date", "odo", "liters", "amount", "price"]
    },
    "ServiceRecord": {
      "title": "Service Record",
      "description": "A record of vehicle service.",
      "type": "object",
      "properties": {
        "date": { "type": "string", "format": "date-time" },
        "odo": { "type": "number" },
        "work": { "type": "string" },
        "labor": { "type": "number" },
        "totalCost": { "type": "number" },
        "parts": {
          "type": "array",
          "items": { "$ref": "#/backend/entities/ServicePart" }
        }
      },
      "required": ["date", "odo", "work", "totalCost", "parts"]
    },
    "ServicePart": {
      "title": "Service Part",
      "description": "A part used in a service.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "cost": { "type": "number" },
        "reminderType": { "type": "string", "enum": ["none", "km", "days"] },
        "reminderValue": { "type": "string" }
      },
      "required": ["id", "name", "cost", "reminderType"]
    },
    "Trip": {
      "title": "Trip",
      "description": "A planned or completed trip.",
      "type": "object",
      "properties": {
        "destination": { "type": "string" },
        "start": { "type": "string", "format": "date-time" },
        "end": { "type": "string", "format": "date-time" },
        "distance": { "type": "string" },
        "startOdo": { "type": "number" },
        "endOdo": { "type": "number" },
        "status": { "type": "string", "enum": ["planned", "active", "completed"] },
        "expenses": {
          "type": "array",
          "items": { "$ref": "#/backend/entities/TripExpense" }
        }
      },
      "required": ["destination", "start", "distance", "status"]
    },
    "TripExpense": {
      "title": "Trip Expense",
      "description": "An expense during a trip.",
      "type": "object",
      "properties": {
        "id": { "type": "number" },
        "item": { "type": "string" },
        "cost": { "type": "number" }
      },
      "required": ["id", "item", "cost"]
    },
    "RiderBoard": {
      "title": "Rider Board",
      "description": "Leaderboard for total kilometers traveled.",
      "type": "object",
      "properties": {
        "userId": { "type": "string" },
        "userName": { "type": "string" },
        "totalKilometers": { "type": "number" }
      },
      "required": ["userId", "totalKilometers"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/backend/entities/UserProfile" },
      "description": "Stores user profile information, including their bike details."
    },
    "/users/{userId}/fuel_logs/{fuelLogId}": {
      "schema": { "$ref": "#/backend/entities/FuelLog" },
      "description": "Stores fuel logs for a user."
    },
    "/users/{userId}/service_logs/{serviceLogId}": {
      "schema": { "$ref": "#/backend/entities/ServiceRecord" },
      "description": "Stores service records for a user."
    },
    "/users/{userId}/trips/{tripId}": {
      "schema": { "$ref": "#/backend/entities/Trip" },
      "description": "Stores trip details for a user."
    },
    "/rider_board/{userId}": {
      "schema": { "$ref": "#/backend/entities/RiderBoard" },
      "description": "Publicly readable leaderboard data. Document ID is the user ID."
    }
  }
}
